-- SharedGoldRockClick.lua
-- Dieses Script muss ein normaler Script (kein LocalScript) sein und als Child unter dem Part liegen,
-- das einen ClickDetector hat. Es erh√∂ht serverseitig das leaderstats Gold des klickenden Spielers.

local part = script.Parent
local clickDetector = part:WaitForChild("ClickDetector")

-- Sicherheit: MaxActivationDistance pr√ºfen (optional anpassen)
if clickDetector.MaxActivationDistance <= 0 then
	clickDetector.MaxActivationDistance = 32
end

-- Debounce pro Spieler, damit nicht gespammt werden kann
local playerDebounce = {}

clickDetector.MouseClick:Connect(function(player)
	if not player or not player.Parent then return end

	-- Debounce pro Spieler (0.2s)
	if playerDebounce[player.UserId] then return end
	playerDebounce[player.UserId] = true
	task.delay(0.2, function() playerDebounce[player.UserId] = nil end)

	-- Leaderstats pr√ºfen und Gold erh√∂hen
	local stats = player:FindFirstChild("leaderstats")
	if not stats then
		warn("SharedGoldRock: leaderstats nicht gefunden f√ºr", player.Name)
		return
	end

	local gold = stats:FindFirstChild("Gold")
	if not gold then
		warn("SharedGoldRock: Gold Value nicht gefunden f√ºr", player.Name)
		return
	end

	-- Betrag anpassen falls gew√ºnscht
	local amount = 1
	gold.Value = gold.Value + amount

	-- Optional: Serverseitiger Debug-Print
	print("ü™® SharedGoldRock: " .. player.Name .. " erhielt " .. tostring(amount) .. " Gold. Neues Gold: " .. tostring(gold.Value))
end)
